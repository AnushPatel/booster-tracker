{% extends "base_generic.html" %}
{% load static %}
{% load index %}
{% block title %}
    Booster Tracker
{% endblock %}

{% block extra_css %}
    <style>

        .info-wrapper {
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            z-index: 2;
            color: inherit;
            text-align: left;
            padding: 20px;
            width: 50%; /* Take up the first half */
        }

        .rocket-wrapper {
            position: relative;
            overflow: hidden;
            border-radius: 0px;
        }

        .rocket-container {
            position: relative;
            width: 100%; /* Adjust width */
            max-width: 1200px; /* Limit maximum width */
            max-height: 360px;
            padding-top: 360px; /* Adjust height */
            margin: 0 auto;
            border-radius: 0px;
            overflow: hidden; /* Ensure content doesn't overflow */
        }

        .blue-background, .yellow-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 60%; /* Two-thirds of the container */
            height: 100%;
        }

        .blue-background {
            background-color: rgba(63, 99, 135, 1); /* Solid blue */
            color: lightgray !important;
        }

        .yellow-background {
            background-color: rgba(248, 211, 102, 1); /* Yellow background */
            color: rgba(63, 99, 135, 1) !important;
        }

        .image-background {
            position: absolute;
            top: 0;
            left: 60%;
            width: 40%; 
            height: 100%;
            background-size: cover;
            display: block; /* Show image by default */
        }

        .blue-text {
            color: lightgray;
        }

        .yellow-text {
            color: rgba(63, 99, 135, 1); /* Set text color to blue */
        }

        .info-wrapper h1 {
            margin-top: 5px;
            margin-right: 5px;
        }

        .card {
            width: 100%;
            max-width: 1200px;
            height: auto;
            max-height: 800px;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 20%;
            padding-bottom: 20%;
        }

        .title {
            margin-top: 0%;
            font-size: 5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .stats {
            margin-top: 0%;
            display: flex;
            justify-content: space-around;
            width: 80%;
        }

        .stat {
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }

        .stat h2 {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 0;
        }

        .stat p {
            font-size: 1.3em;
            word-wrap: break-word;
        }

        @media (max-width: 850px) { /* Adjust as needed */
            .rocket-container {
                max-height: none; /* Remove maximum height */
                padding-top: 0; /* Remove padding top */
            }
            .image-background {
                display: none; /* Hide image on smaller screens */
            }
            .info-wrapper {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                width: auto; /* Take up full width */
                text-align: left; /* Center align text */
            }
            .blue-background, .yellow-background {
                width: 100%; /* Full width on smaller screens */
            }
            .stats {
                display: inline;
            }
        }
    </style>
{% endblock %}


{% block content %}
    <div class="rocket-container">
        <div class="blue-background"></div>
        <div class="image-background" style="background-image: linear-gradient(95deg, rgba(63, 99, 135, 1) 15.74%, transparent 40%), url('{{ next_launch_photo }}');">
        </div>
        <div class="info-wrapper blue-text">
            <h3>UPCOMING MISSION:</h3>
            <h1 style="text-align: left">{{ next_launch.name }}</h1>
            <p> <b>Rocket: </b> {{ next_launch.rocket.name }}</p>
            <p> <b>Scheduled: </b> {{ next_launch.time|date:"F j, Y H:i" }} UTC</p>
            <p> <b>Launch Site: </b>{{ next_launch.pad.name }}</p>
            <p> <b>Booster{% if "and" in next_launch_boosters %}s{% endif %}: </b>{{ next_launch_boosters }}</p>
            <p> <b>Landing Location{% if "and" in next_launch_recoveries %}s{% endif %}: </b>{{ next_launch_recoveries }}</p>
            <p> <b>Tug{% if "and" in next_launch_tugs %}s{% endif %}: </b>{{ next_launch_tugs }}</p>
            <p> <b>Fairing Recovery: </b>{{ next_launch_fairing_recovery }}</p>
        </div>
    </div>

    <div class="rocket-container">
        <div class="yellow-background"></div>
        <div class="image-background" style="background-image: linear-gradient(95deg, rgba(248, 211, 102, 1) 7.87%, transparent 32.13%), url('{{ last_launch_photo }}');"></div>
        <div class="info-wrapper yellow-text">
            <h3>PREVIOUS MISSION:</h3>
            <h1 style="text-align: left">{{ last_launch.name }}</h1>
            <p> <b>Rocket: </b> {{ last_launch.rocket.name }}</p>
            <p> <b>Liftoff Time: </b>{{ last_launch.time|date:"F j, Y H:i" }} UTC</p>
            <p> <b>Launch Site: </b>{{ last_launch.pad.name }}</p>
            <p> <b>Booster{% if "and" in last_launch_boosters %}s{% endif %}: </b>{{ last_launch_boosters }}</p>
            <p> <b>Landing Location{% if "and" in last_launch_recoveries %}s{% endif %}: </b>{{ last_launch_recoveries }}</p>
            <p> <b>Tug{% if "and" in last_launch_tugs %}s{% endif %}: </b>{{ last_launch_tugs }}</p>
            <p> <b>Fairing Recovery: </b>{{ last_launch_fairing_recovery }}</p>
        </div>
    </div>

    <h1 style="font-size: 3em;">Falcon Stats</h1>
    <p><b>Missions: </b> {{ launches_per_vehicle.0.1|add:launches_per_vehicle.1.1|add:launches_per_vehicle.3.1 }}</p>
    <p><b>Successful Missions: </b> {{ launches_per_vehicle.0.2|add:launches_per_vehicle.1.2|add:launches_per_vehicle.3.2 }}</p>
    <p><b>Landing Attempts: </b> {{ num_landings.0 }}</p>
    <p><b>Landings: </b>{{ num_landings.1 }}</p>
    <p><b>Booster Reuses: </b>{{ num_booster_reflights }}</p>
    <p><b>Booster With Most Flights: </b>{{ most_flown_boosters }}</p>
    <p><b>Quickest Booster Turnaround: </b>{{ quickest_booster_turnaround }}</p>
    <p><b>Shortest Time Between Launches: </b>{{ shortest_time_between_launches }}</p>

    <div class="card" style="background-image: url('/static/images/falcon_9_2.jpg');">
        <h1 class="title">Falcon 9</h1>
        <div class="stats">
          <div class="stat">
            <h2>{{ launches_per_vehicle.0.1 }}</h2>
            <p>Missions</p>
          </div>
          <div class="stat">
            <h2>{{ launches_per_vehicle.0.2 }}</h2>
            <p>Successes</p>
          </div>
          <div class="stat">
            <h2>{{ falcon_9_reflights }}</h2>
            <p>Reflights</p>
          </div>
        </div>
      </div>
      
      <div class="card" style="background-image: url('/static/images/falcon_heavy.jpg');">
        <h1 class="title">Falcon Heavy</h1>
        <div class="stats">
          <div class="stat">
            <h2>{{ launches_per_vehicle.1.1 }}</h2>
            <p>Missions</p>
          </div>
          <div class="stat">
            <h2>{{ launches_per_vehicle.1.2 }}</h2>
            <p>Successes</p>
          </div>
          <div class="stat">
            <h2>{{ falcon_heavy_reflights }}</h2>
            <p>Flightproven Launches</p>
          </div>
        </div>
      </div>

      <div class="card" style="background-image: url('/static/images/Falcon_1_launches_photo.jpg');">
        <h1 class="title">Falcon 1</h1>
        <div class="stats" style="width: 50%;">
          <div class="stat">
            <h2>5</h2>
            <p>Missions</p>
          </div>
          <div class="stat">
            <h2>2</h2>
            <p>Successes</p>
          </div>
        </div>
      </div>

      <h1 style="font-size: 3em;">Launch pads</h1>

    {% if pads %}
        {% for pad in pads %}
        <div class="rocket-container" style="border: 1px solid white;">
            <div style="background-color: #333;"></div>
            <div class="image-background" style="background-image: linear-gradient(90deg, #333 0%, transparent 25%), url('{{ pad.image.url }}');"></div>
            <div class="info-wrapper blue-text">
                <h1 style="text-align: left">{{ pad.name|upper }}</h1>
                <p> <b>Nickname: </b>{{ pad.nickname }}</p>
                <p> <b>Location: </b>{{ pad.location }}</p>
                <p> <b>Launches: </b>{{ pad_stats|index:forloop.counter0|index:1 }}</p>
                <p> <b>Fastest Turnaround: </b>{{ pad_stats|index:forloop.counter0|index:2 }}</p>
                <p> <b>Status: </b>{{ pad.status|lower|title }}</p>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No pads are available.</p>
    {% endif %}
    
    <h1 style="font-size: 3em;">Recovery Zones</h1>

    {% if recovery_zones %}
        {% for zone in recovery_zones %}
        <div class="rocket-container" style="border: 1px solid white;">
            <div style="background-color: #333;"></div>
            <div class="image-background" style="background-image: linear-gradient(90deg, #333 0%, transparent 25%), url('{{ zone.image.url }}');"></div>
            <div class="info-wrapper blue-text">
                <h1 style="text-align: left">{{ zone.name|upper }}</h1>
                <p> <b>Nickname: </b>{{ zone.nickname }}</p>
                {% if zone.serial_number %}
                    <p> <b>Boat ID: </b>{{ zone.serial_number }}</p>
                {% endif %}
                <p> <b>Successful Landings: </b>{{ zone_stats|index:forloop.counter0|index:1 }}</p>
                <p> <b>Fastest Turnaround: </b>{{ zone_stats|index:forloop.counter0|index:2 }}</p>
                <p> <b>Status: </b>{{ zone.status|lower|title }}</p>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No landing zones are available.</p>
    {% endif %}
      
{% endblock %}
